<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="382px" preserveAspectRatio="none" style="width:1187px;height:382px;background:#FFFFFF;" version="1.1" viewBox="0 0 1187 382" width="1187px" zoomAndPan="magnify"><defs/><g><g><title>API Layer</title><rect fill="#FFFFFF" height="203.9297" style="stroke:#181818;stroke-width:1;" width="10" x="201.5405" y="67.4297"/></g><g><title>Booking Service</title><rect fill="#FFFFFF" height="145.6641" style="stroke:#181818;stroke-width:1;" width="10" x="334.6929" y="96.5625"/></g><g><title>Notification Worker</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="938.4673" y="300.4922"/></g><g><title>SPA Frontend</title><rect fill="#000000" fill-opacity="0.00000" height="311.3281" width="8" x="55.2329" y="36.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="59" x2="59" y1="36.2969" y2="347.625"/></g><g><title>API Layer</title><rect fill="#000000" fill-opacity="0.00000" height="311.3281" width="8" x="202.5405" y="36.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="205.7246" x2="205.7246" y1="36.2969" y2="347.625"/></g><g><title>Booking Service</title><rect fill="#000000" fill-opacity="0.00000" height="311.3281" width="8" x="335.6929" y="36.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="339.3511" x2="339.3511" y1="36.2969" y2="347.625"/></g><g><title>Database</title><rect fill="#000000" fill-opacity="0.00000" height="311.3281" width="8" x="503.1353" y="36.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="506.7349" x2="506.7349" y1="36.2969" y2="347.625"/></g><g><title>Redis Cache</title><rect fill="#000000" fill-opacity="0.00000" height="311.3281" width="8" x="603.7354" y="36.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="607.5356" x2="607.5356" y1="36.2969" y2="347.625"/></g><g><title>Worker Queue</title><rect fill="#000000" fill-opacity="0.00000" height="311.3281" width="8" x="721.4766" y="36.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="724.9351" x2="724.9351" y1="36.2969" y2="347.625"/></g><g><title>Notification Worker</title><rect fill="#000000" fill-opacity="0.00000" height="311.3281" width="8" x="939.4673" y="36.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="942.7573" x2="942.7573" y1="36.2969" y2="347.625"/></g><g><title>Email.SMS Gateway</title><rect fill="#000000" fill-opacity="0.00000" height="311.3281" width="8" x="1101.0303" y="36.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="1104.1772" x2="1104.1772" y1="36.2969" y2="347.625"/></g><g class="participant participant-head" data-participant="SPA"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="108.4658" x="5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="94.4658" x="12" y="24.9951">SPA Frontend</text></g><g class="participant participant-tail" data-participant="SPA"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="108.4658" x="5" y="346.625"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="94.4658" x="12" y="366.6201">SPA Frontend</text></g><g class="participant participant-head" data-participant="API"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="79.6318" x="166.7246" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="65.6318" x="173.7246" y="24.9951">API Layer</text></g><g class="participant participant-tail" data-participant="API"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="79.6318" x="166.7246" y="346.625"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="65.6318" x="173.7246" y="366.6201">API Layer</text></g><g class="participant participant-head" data-participant="BS"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="126.6836" x="276.3511" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="112.6836" x="283.3511" y="24.9951">Booking Service</text></g><g class="participant participant-tail" data-participant="BS"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="126.6836" x="276.3511" y="346.625"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="112.6836" x="283.3511" y="366.6201">Booking Service</text></g><g class="participant participant-head" data-participant="DB"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="80.8008" x="466.7349" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66.8008" x="473.7349" y="24.9951">Database</text></g><g class="participant participant-tail" data-participant="DB"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="80.8008" x="466.7349" y="346.625"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66.8008" x="473.7349" y="366.6201">Database</text></g><g class="participant participant-head" data-participant="REDIS"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="100.3994" x="557.5356" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="86.3994" x="564.5356" y="24.9951">Redis Cache</text></g><g class="participant participant-tail" data-participant="REDIS"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="100.3994" x="557.5356" y="346.625"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="86.3994" x="564.5356" y="366.6201">Redis Cache</text></g><g class="participant participant-head" data-participant="WQ"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="115.083" x="667.9351" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="101.083" x="674.9351" y="24.9951">Worker Queue</text></g><g class="participant participant-tail" data-participant="WQ"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="115.083" x="667.9351" y="346.625"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="101.083" x="674.9351" y="366.6201">Worker Queue</text></g><g class="participant participant-head" data-participant="NW"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="149.4199" x="868.7573" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="135.4199" x="875.7573" y="24.9951">Notification Worker</text></g><g class="participant participant-tail" data-participant="NW"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="149.4199" x="868.7573" y="346.625"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="135.4199" x="875.7573" y="366.6201">Notification Worker</text></g><g class="participant participant-head" data-participant="Email.SMS Gateway"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="153.7061" x="1028.1772" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="139.7061" x="1035.1772" y="24.9951">Email/SMS Gateway</text></g><g class="participant participant-tail" data-participant="Email.SMS Gateway"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="153.7061" x="1028.1772" y="346.625"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="139.7061" x="1035.1772" y="366.6201">Email/SMS Gateway</text></g><g><title>API Layer</title><rect fill="#FFFFFF" height="203.9297" style="stroke:#181818;stroke-width:1;" width="10" x="201.5405" y="67.4297"/></g><g><title>Booking Service</title><rect fill="#FFFFFF" height="145.6641" style="stroke:#181818;stroke-width:1;" width="10" x="334.6929" y="96.5625"/></g><g><title>Notification Worker</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="938.4673" y="300.4922"/></g><g class="message" data-participant-1="SPA" data-participant-2="API"><polygon fill="#181818" points="189.5405,63.4297,199.5405,67.4297,189.5405,71.4297,193.5405,67.4297" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="59.2329" x2="195.5405" y1="67.4297" y2="67.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="101.3403" x="66.2329" y="62.3638">POST /bookings</text></g><g class="message" data-participant-1="API" data-participant-2="BS"><polygon fill="#181818" points="322.6929,92.5625,332.6929,96.5625,322.6929,100.5625,326.6929,96.5625" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="211.5405" x2="328.6929" y1="96.5625" y2="96.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104.1523" x="218.5405" y="91.4966">createBooking()</text></g><g class="message" data-participant-1="BS" data-participant-2="DB"><polygon fill="#181818" points="495.1353,121.6953,505.1353,125.6953,495.1353,129.6953,499.1353,125.6953" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="344.6929" x2="501.1353" y1="125.6953" y2="125.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138.4424" x="351.6929" y="120.6294">BEGIN TRANSACTION</text></g><g class="message" data-participant-1="BS" data-participant-2="DB"><polygon fill="#181818" points="495.1353,150.8281,505.1353,154.8281,495.1353,158.8281,499.1353,154.8281" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="344.6929" x2="501.1353" y1="154.8281" y2="154.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="102.9209" x="351.6929" y="149.7622">INSERT booking</text></g><g class="message" data-participant-1="BS" data-participant-2="DB"><polygon fill="#181818" points="495.1353,179.9609,505.1353,183.9609,495.1353,187.9609,499.1353,183.9609" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="344.6929" x2="501.1353" y1="183.9609" y2="183.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="53.5171" x="351.6929" y="178.895">COMMIT</text></g><g class="message" data-participant-1="BS" data-participant-2="REDIS"><polygon fill="#181818" points="595.7354,209.0938,605.7354,213.0938,595.7354,217.0938,599.7354,213.0938" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="344.6929" x2="601.7354" y1="213.0938" y2="213.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="181.5049" x="351.6929" y="208.0278">invalidate availability cache</text></g><g class="message" data-participant-1="BS" data-participant-2="WQ"><polygon fill="#181818" points="713.4766,238.2266,723.4766,242.2266,713.4766,246.2266,717.4766,242.2266" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="339.6929" x2="719.4766" y1="242.2266" y2="242.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="206.4448" x="346.6929" y="237.1606">enqueue BookingCreated event</text></g><g class="message" data-participant-1="API" data-participant-2="SPA"><polygon fill="#181818" points="70.2329,267.3594,60.2329,271.3594,70.2329,275.3594,66.2329,271.3594" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="64.2329" x2="205.5405" y1="271.3594" y2="271.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="118.3076" x="76.2329" y="266.2935">HTTP 201 Created</text></g><g class="message" data-participant-1="WQ" data-participant-2="NW"><polygon fill="#181818" points="926.4673,296.4922,936.4673,300.4922,926.4673,304.4922,930.4673,300.4922" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="725.4766" x2="932.4673" y1="300.4922" y2="300.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="193.9907" x="732.4766" y="295.4263">deliver BookingCreated event</text></g><g class="message" data-participant-1="NW" data-participant-2="Email.SMS Gateway"><polygon fill="#181818" points="1093.0303,325.625,1103.0303,329.625,1093.0303,333.625,1097.0303,329.625" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="943.4673" x2="1099.0303" y1="329.625" y2="329.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="115.2734" x="950.4673" y="324.5591">send notifications</text></g><!--SRC=[RP9FJyCm3CNl_HHMJt100uux8FKVenBBkgPIpruRm5f9HviLxTlZj16q4yVu_Ho_v-I4dQ6AJgWD-38BuBbhjL6wzW5xu89tcXD1bi8hNbGtodnQoc7R7ac_WrJTG9KQeL0kcHWD7h2Vn3XSYhcggOS8guz9pvCulUels-weEjYVrNbYolqI4AsXDwhGKAjXeaTEb9uDUFTaVSCQifqiO7MOBFSULeO6D6fCPGa6GybSrIakksWtjtyW9sE0iJXaB4msgO0Y3uGCeYBTYRcO2fda1RXXSoNQRRTfuIfZN2wI7h2XsWx10Qd10pLaBb3PnJYst3Eez9VT0pXtqMYr1ZKeRRnQpQswI7O5QtWfYWmUxn_0TSnPcz_ZsnaM9RErQcZWZVyxuxUBjyiqz_Z99pjUoQs43GlVUF7vafw_5EZPo_JpaQBy0G00]--></g></svg>