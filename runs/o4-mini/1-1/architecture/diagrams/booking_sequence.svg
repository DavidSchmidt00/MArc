<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="867px" preserveAspectRatio="none" style="width:1601px;height:867px;background:#FFFFFF;" version="1.1" viewBox="0 0 1601 867" width="1601px" zoomAndPan="magnify"><defs/><g><rect fill="none" height="104.5313" style="stroke:#000000;stroke-width:1.5;" width="742.8115" x="456.1563" y="228.8281"/><g><title>Customer</title><rect fill="#000000" fill-opacity="0.00000" height="704.9219" width="8" x="38.002" y="81.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="42" x2="42" y1="81.2969" y2="786.2188"/></g><g><title>SPA Client</title><rect fill="#000000" fill-opacity="0.00000" height="704.9219" width="8" x="205.5034" y="81.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="208.5601" x2="208.5601" y1="81.2969" y2="786.2188"/></g><g><title>API Server</title><rect fill="#000000" fill-opacity="0.00000" height="704.9219" width="8" x="505.4106" y="81.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="509.1563" x2="509.1563" y1="81.2969" y2="786.2188"/></g><g><title>Booking Engine</title><rect fill="#000000" fill-opacity="0.00000" height="704.9219" width="8" x="712.1343" y="81.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="715.6724" x2="715.6724" y1="81.2969" y2="786.2188"/></g><g><title>PostgreSQL DB</title><rect fill="#000000" fill-opacity="0.00000" height="704.9219" width="8" x="948.9648" y="81.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="952.1709" x2="952.1709" y1="81.2969" y2="786.2188"/></g><g><title>Redis Cache . Queue</title><rect fill="#000000" fill-opacity="0.00000" height="704.9219" width="8" x="1101.8633" y="81.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="1105.7588" x2="1105.7588" y1="81.2969" y2="786.2188"/></g><g><title>Notification Worker</title><rect fill="#000000" fill-opacity="0.00000" height="704.9219" width="8" x="1296.8057" y="81.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="1300.0957" x2="1300.0957" y1="81.2969" y2="786.2188"/></g><g><title>Email.SMS Provider</title><rect fill="#000000" fill-opacity="0.00000" height="704.9219" width="8" x="1510.6895" y="81.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="1514.6616" x2="1514.6616" y1="81.2969" y2="786.2188"/></g><g class="participant participant-head" data-participant="Customer"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="68.0039" x="5" y="77.9951">Customer</text><ellipse cx="42.002" cy="13.5" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M42.002,21.5 L42.002,48.5 M29.002,29.5 L55.002,29.5 M42.002,48.5 L29.002,63.5 M42.002,48.5 L55.002,63.5" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-tail" data-participant="Customer"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="68.0039" x="5" y="798.2139">Customer</text><ellipse cx="42.002" cy="810.0156" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M42.002,818.0156 L42.002,845.0156 M29.002,826.0156 L55.002,826.0156 M42.002,845.0156 L29.002,860.0156 M42.002,845.0156 L55.002,860.0156" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-head" data-participant="SPA"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="85.8867" x="166.5601" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="71.8867" x="173.5601" y="69.9951">SPA Client</text></g><g class="participant participant-tail" data-participant="SPA"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="85.8867" x="166.5601" y="785.2188"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="71.8867" x="173.5601" y="805.2139">SPA Client</text></g><g class="participant participant-head" data-participant="API"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="86.5088" x="466.1563" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="72.5088" x="473.1563" y="69.9951">API Server</text></g><g class="participant participant-tail" data-participant="API"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="86.5088" x="466.1563" y="785.2188"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="72.5088" x="473.1563" y="805.2139">API Server</text></g><g class="participant participant-head" data-participant="BE"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="122.9238" x="654.6724" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="108.9238" x="661.6724" y="69.9951">Booking Engine</text></g><g class="participant participant-tail" data-participant="BE"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="122.9238" x="654.6724" y="785.2188"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="108.9238" x="661.6724" y="805.2139">Booking Engine</text></g><g class="participant participant-head" data-participant="DB"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="119.5879" x="893.1709" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="105.5879" x="900.1709" y="69.9951">PostgreSQL DB</text></g><g class="participant participant-tail" data-participant="DB"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="119.5879" x="893.1709" y="785.2188"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="105.5879" x="900.1709" y="805.2139">PostgreSQL DB</text></g><g class="participant participant-head" data-participant="REDIS"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="166.209" x="1022.7588" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="152.209" x="1029.7588" y="69.9951">Redis Cache &amp; Queue</text></g><g class="participant participant-tail" data-participant="REDIS"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="166.209" x="1022.7588" y="785.2188"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="152.209" x="1029.7588" y="805.2139">Redis Cache &amp; Queue</text></g><g class="participant participant-head" data-participant="NM"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="149.4199" x="1226.0957" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="135.4199" x="1233.0957" y="69.9951">Notification Worker</text></g><g class="participant participant-tail" data-participant="NM"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="149.4199" x="1226.0957" y="785.2188"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="135.4199" x="1233.0957" y="805.2139">Notification Worker</text></g><g class="participant participant-head" data-participant="EXT"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="150.0557" x="1439.6616" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="136.0557" x="1446.6616" y="69.9951">Email/SMS Provider</text></g><g class="participant participant-tail" data-participant="EXT"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="150.0557" x="1439.6616" y="785.2188"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="136.0557" x="1446.6616" y="805.2139">Email/SMS Provider</text></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="1594.7173" x="0" y="111.8633"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1594.7173" y1="111.8633" y2="111.8633"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1594.7173" y1="114.8633" y2="114.8633"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2;" width="158.7583" x="717.9795" y="101.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="140.2324" x="723.9795" y="117.3638">Availability Lookup</text><g class="message" data-participant-1="Customer" data-participant-2="SPA"><polygon fill="#181818" points="197.5034,151.5625,207.5034,155.5625,197.5034,159.5625,201.5034,155.5625" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="42.002" x2="203.5034" y1="155.5625" y2="155.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138.5186" x="49.002" y="150.4966">Select date &amp; service</text></g><g class="message" data-participant-1="SPA" data-participant-2="API"><polygon fill="#181818" points="497.4106,180.6953,507.4106,184.6953,497.4106,188.6953,501.4106,184.6953" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="209.5034" x2="503.4106" y1="184.6953" y2="184.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="168.3779" x="216.5034" y="179.6294">GET /bookings/availability</text></g><g class="message" data-participant-1="API" data-participant-2="REDIS"><polygon fill="#181818" points="1093.8633,209.8281,1103.8633,213.8281,1093.8633,217.8281,1097.8633,213.8281" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="509.4106" x2="1099.8633" y1="213.8281" y2="213.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="230.0518" x="516.4106" y="208.7622">GET availability:&lt;staff_id&gt;:&lt;date&gt;</text></g><path d="M456.1563,228.8281 L520.5991,228.8281 L520.5991,235.9609 L510.5991,245.9609 L456.1563,245.9609 L456.1563,228.8281" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="104.5313" style="stroke:#000000;stroke-width:1.5;" width="742.8115" x="456.1563" y="228.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19.4429" x="471.1563" y="241.895">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="77.9668" x="535.5991" y="241.0386">[cache miss]</text><g class="message" data-participant-1="API" data-participant-2="BE"><polygon fill="#181818" points="704.1343,263.0938,714.1343,267.0938,704.1343,271.0938,708.1343,267.0938" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="509.4106" x2="710.1343" y1="267.0938" y2="267.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="139.1152" x="516.4106" y="262.0278">computeAvailability()</text></g><g class="message" data-participant-1="BE" data-participant-2="DB"><polygon fill="#181818" points="940.9648,292.2266,950.9648,296.2266,940.9648,300.2266,944.9648,296.2266" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="716.1343" x2="946.9648" y1="296.2266" y2="296.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="212.8306" x="723.1343" y="291.1606">SELECT staff schedules, services</text></g><g class="message" data-participant-1="BE" data-participant-2="REDIS"><polygon fill="#181818" points="1093.8633,321.3594,1103.8633,325.3594,1093.8633,329.3594,1097.8633,325.3594" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="716.1343" x2="1099.8633" y1="325.3594" y2="325.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="141.8638" x="723.1343" y="320.2935">SET availability cache</text></g><g class="message" data-participant-1="API" data-participant-2="SPA"><polygon fill="#181818" points="220.5034,357.4922,210.5034,361.4922,220.5034,365.4922,216.5034,361.4922" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="214.5034" x2="508.4106" y1="361.4922" y2="361.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="137.4141" x="226.5034" y="356.4263">return available slots</text></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="1594.7173" x="0" y="390.0586"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1594.7173" y1="390.0586" y2="390.0586"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1594.7173" y1="393.0586" y2="393.0586"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2;" width="116.7622" x="738.9775" y="379.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="98.2363" x="744.9775" y="395.5591">Booking Flow</text><g class="message" data-participant-1="Customer" data-participant-2="SPA"><polygon fill="#181818" points="197.5034,429.7578,207.5034,433.7578,197.5034,437.7578,201.5034,433.7578" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="42.002" x2="203.5034" y1="433.7578" y2="433.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="143.5015" x="49.002" y="428.6919">Choose slot &amp; confirm</text></g><g class="message" data-participant-1="SPA" data-participant-2="API"><polygon fill="#181818" points="497.4106,458.8906,507.4106,462.8906,497.4106,466.8906,501.4106,462.8906" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="209.5034" x2="503.4106" y1="462.8906" y2="462.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="275.9072" x="216.5034" y="457.8247">POST /bookings { staffId, serviceId, time }</text></g><g class="message" data-participant-1="API" data-participant-2="BE"><polygon fill="#181818" points="704.1343,488.0234,714.1343,492.0234,704.1343,496.0234,708.1343,492.0234" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="509.4106" x2="710.1343" y1="492.0234" y2="492.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104.1523" x="516.4106" y="486.9575">createBooking()</text></g><g class="message" data-participant-1="BE" data-participant-2="REDIS"><polygon fill="#181818" points="1093.8633,517.1563,1103.8633,521.1563,1093.8633,525.1563,1097.8633,521.1563" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="716.1343" x2="1099.8633" y1="521.1563" y2="521.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="220.689" x="723.1343" y="516.0903">LOCK staff:&lt;staff_id&gt;:&lt;timeslot&gt;</text></g><g class="message" data-participant-1="BE" data-participant-2="DB"><polygon fill="#181818" points="940.9648,546.2891,950.9648,550.2891,940.9648,554.2891,944.9648,550.2891" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="716.1343" x2="946.9648" y1="550.2891" y2="550.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="149.0112" x="723.1343" y="545.2231">INSERT booking (ACID)</text></g><g class="message" data-participant-1="BE" data-participant-2="REDIS"><polygon fill="#181818" points="1093.8633,575.4219,1103.8633,579.4219,1093.8633,583.4219,1097.8633,579.4219" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="716.1343" x2="1099.8633" y1="579.4219" y2="579.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="239.9287" x="723.1343" y="574.356">UNLOCK staff:&lt;staff_id&gt;:&lt;timeslot&gt;</text></g><g class="message" data-participant-1="BE" data-participant-2="REDIS"><polygon fill="#181818" points="1093.8633,604.5547,1103.8633,608.5547,1093.8633,612.5547,1097.8633,608.5547" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="716.1343" x2="1099.8633" y1="608.5547" y2="608.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="173.2847" x="723.1343" y="603.4888">RPUSH notifications queue</text></g><g class="message" data-participant-1="BE" data-participant-2="API"><polygon fill="#181818" points="520.4106,633.6875,510.4106,637.6875,520.4106,641.6875,516.4106,637.6875" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="514.4106" x2="715.1343" y1="637.6875" y2="637.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="182.7236" x="526.4106" y="632.6216">return booking confirmation</text></g><g class="message" data-participant-1="API" data-participant-2="SPA"><polygon fill="#181818" points="220.5034,662.8203,210.5034,666.8203,220.5034,670.8203,216.5034,666.8203" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="214.5034" x2="508.4106" y1="666.8203" y2="666.8203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="132.6978" x="226.5034" y="661.7544">display confirmation</text></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="1594.7173" x="0" y="695.3867"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1594.7173" y1="695.3867" y2="695.3867"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1594.7173" y1="698.3867" y2="698.3867"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2;" width="162.5352" x="716.0911" y="684.8203"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="144.0093" x="722.0911" y="700.8872">Notification Worker</text><g class="message" data-participant-1="NM" data-participant-2="REDIS"><polygon fill="#181818" points="1116.8633,735.0859,1106.8633,739.0859,1116.8633,743.0859,1112.8633,739.0859" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="1110.8633" x2="1299.8057" y1="739.0859" y2="739.0859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="170.9424" x="1122.8633" y="734.02">BLPOP notifications queue</text></g><g class="message" data-participant-1="NM" data-participant-2="EXT"><polygon fill="#181818" points="1502.6895,764.2188,1512.6895,768.2188,1502.6895,772.2188,1506.6895,768.2188" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="1300.8057" x2="1508.6895" y1="768.2188" y2="768.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="189.8838" x="1307.8057" y="763.1528">send email/SMS confirmation</text></g><!--SRC=[ZPDHRziW58NV_Ikk-Z1rqgQyHqsas6QRDSTnGwhkhQ8sIL4nU80pLTF- -y26o5Hvw9lH_JZtt7CDQOnKa0tQo8wgf2VAi8RrH1YumVK6CiweC3T0DDXZND_K1M2gpbIDTNkCwwcKhqoS08aJ4tHaKXGZjTJcf2Y-Bo5FHo9FOs9FMwOX8yqBXKzmFz1XKjgZlC0nMad3ZgmXXaa1ZrAzUcFLDkPGHnXVu2s6MiapQps6VXsIPBM2pTcMoJFZpBn1QMSOUbYjaf0HV5sxA61fP-UqCT0IuwnfcmHhQE9g5d7XBE4xEi3YUSf1ByXCEN60vSOvF3clB- -q8SVZ4slNoplNOfqGRg0PW-YOra4WHVPs8xj-C7Hk_VPpOaiMo5Fd5PKeEy2e2Tfgj0Ed-ajmhJqRtE1tRgQ-2HLjQ3j5eAWPb0Wefw2vD7gCCMp_6vT_hkUNlKYffoislqQA8rDTd5-zmxC0uUyqGD5UZBjFmpeA_-8y5BMHUGkN9C9qvIxxEIb5AJiTPsOz3wweCDeVm5k0sqrMvE_r7geFAeOB-_e1_m0n-ryr_7Q_jkUcuNsueRKFQCJZBTWNqdFo5XDk1rTUX5j5jPsRISjwLryrCt7sNLXAszq3lRoSUQl_]--></g></svg>